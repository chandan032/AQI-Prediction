# -*- coding: utf-8 -*-
"""aqi data visaulization.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1x5LXD3IRQY7zc72rYomPH0pWZofogiSH
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
# Reading csv file
combine_data= pd.read_csv('cleaned_data.csv')
# checking no of numerical features
combine_data.info()
# To get statistical information
combine_data.describe()
# Now we need check null values
combine_data.isnull()
combine_data.isnull().sum()
# we also visualize null with seaborn
sns.heatmap(combine_data.isnull(),yticklabels=False)
plt.savefig('heatmap')

# checking outliers 
combine_data.boxplot()
plt.show()
plt.savefig('boxplot')

# Multivariate anlaysis
sns.pairplot(combine_data)
plt.savefig('Multivariate')

# We also check the corelation between dependent and independent feature
combine_data.corr()
relation =combine_data.corr()
relation_index=relation.index
sns.heatmap(combine_data[relation_index].corr(),annot=True)
plt.savefig('correlation')

X = combine_data.iloc[:, :-1].values
y = combine_data.iloc[:, -1].values

from sklearn.model_selection import train_test_split
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=43)

ind=['T','TM','Tm','SLP','H','VV','V','VM']

from sklearn.ensemble import ExtraTreesRegressor
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score as acc
reg= ExtraTreesRegressor()
reg.fit(X_train,y_train)
reg.feature_importances_
feat_importances = pd.Series(reg.feature_importances_, index=ind)
feat_importances.nlargest(5).plot(kind='barh')
plt.show()
plt.savefig('importance')

